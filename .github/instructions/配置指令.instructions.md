---
applyTo: '**'
---

# Day Translation 项目 instructions 配置（自动化与知识融合增强版）

## 📋 项目自动化与知识融合原则

- **主开发目录**：所有自动化抓取、索引、文档生成、代码分析等操作，均以 `day_translation/` 目录为主。
- **AI 记忆库**：`AI_工作记忆/` 目录为 AI 的知识经验库，包含历史修复、设计、决策、进度、最佳实践等，自动吸收并融合到当前能力。
- **知识融合**：每次生成文档、分析代码、提出建议时，自动融合最新代码实现与 AI_工作记忆 的相关经验，提升输出的针对性和智能性。
- **能力成长**：每次读取、吸收 AI_工作记忆 内容，视为 AI 能力成长，后续建议和文档会自动参考历史经验。
- **引用规则**：在文档、建议、方案中，适时引用 AI_工作记忆 目录下的相关内容，提升方案的上下文感知和前瞻性。
- **自动化输出**：支持一键生成开发文档、API 说明、设计方案、优化建议等，输出内容自动融合主代码与历史经验。
- **持续进化**：随着 AI_工作记忆 的丰富，自动化输出将持续进化，越来越贴合项目实际和历史脉络。

## 🔧 编码与架构标准

### 代码质量
- **类型注解**：所有函数参数和返回值必须有类型注解
- **PEP 8 规范**：严格遵循 Python 编码风格指南
- **文档字符串**：函数和类必须有详细的 docstring，包含参数说明和返回值描述
- **变量命名**：使用描述性名称，避免缩写和魔术数字
- **代码清洁**：移除未使用的导入、变量和参数，避免死代码

### 模块化设计
- **单一职责**：每个模块和函数职责明确，功能内聚
- **组合优于继承**：优先使用组合模式，减少复杂的继承层次
- **接口设计**：参数语义清晰，避免使用布尔参数改变函数行为
- **错误处理**：统一的异常处理和日志记录模式
- **依赖注入**：通过参数传递依赖，提高可测试性

### XML 处理标准
- **统一工具类**：所有 XML 操作必须使用 `XMLProcessor` 类
- **禁用直接调用**：不允许直接使用 `lxml.etree` 或其他 XML 库
- **元素创建**：使用 `XMLProcessor.create_element/create_subelement`
- **注释处理**：使用 `XMLProcessor.create_comment` 创建注释
- **文件保存**：使用 `XMLProcessor.save_xml` 保存文件，启用格式化

## 🎯 领域知识与流程

- **RimWorld 模组结构**、**翻译数据格式规范**、**路径构建规则**、**翻译工作流程**等，详见原配置，继续遵循。
- **自动化流程**：支持自动化抓取代码结构、API、注释、交互流程、历史经验，生成结构化开发文档和知识索引。
- **文档生成目标**：面向开发者、维护者、翻译者，输出 Markdown/HTML/结构化文档。
- **索引粒度**：支持模块、类、函数、接口、配置项等多级索引。
- **特殊规则**：可自定义抓取、过滤、忽略规则，支持多语言文档融合。

## ⚙️ 自动化与知识融合偏好

- **主目录优先**：所有分析、文档生成以 day_translation/ 为主。
- **经验优先**：遇到设计、流程、修复等问题，优先查找 AI_工作记忆 相关经验并融合。
- **输出融合**：所有自动化输出均融合主代码与历史经验，提升智能化和上下文感知。
- **能力成长机制**：每次吸收 AI_工作记忆 内容，自动提升后续输出质量。

## 📝 提交与文档规范

- **自动化文档**：支持一键生成开发文档、API 说明、设计方案，自动融合主代码与历史经验。
- **引用历史**：文档中可自动引用 AI_工作记忆 相关内容，提升方案权威性。
- **持续维护**：每次代码/经验变更后，建议同步更新自动化文档。

## 🚀 质量保证与进化

- **测试覆盖**、**类型检查**、**代码风格**、**性能基准**等，继续遵循原有高标准。
- **知识进化**：AI_工作记忆 越丰富，自动化输出越智能。

---

> 本 instructions 配置专为自动化抓取 day_translation 目录开发内容、融合 AI_工作记忆 经验、持续进化开发文档与能力而设计。