# 翻译系统待办任务清单

## 🚨 高优先级任务

### 1. DLL 配置翻译支持
**问题**: 无法识别 DLL 文件的配置翻译
**路径**: `C:\Program Files (x86)\Steam\steamapps\common\RimWorld\Mods\RJWPE-main\1.6`
**需求**: 
- [ ] 添加 DLL 文件解析功能
- [ ] 支持从 DLL 中提取翻译配置
- [ ] 实现 DLL 翻译内容的识别和提取

### 2. 内嵌 Mod 翻译支持
**问题**: 无法对内嵌的 mod 进行翻译
**需求**:
- [ ] 识别内嵌 mod 结构
- [ ] 递归扫描内嵌 mod 的翻译文件
- [ ] 支持多层嵌套的 mod 结构

### 3. Common 类型模组翻译
**问题**: 无法处理 `C:\Program Files (x86)\Steam\steamapps\common\RimWorld\Mods\nudity-matters-more-opinions\Common` 类型的模组翻译
**需求**:
- [ ] 添加 Common 目录扫描支持
- [ ] 识别 Common 类型的翻译文件结构
- [ ] 实现 Common 模组的翻译提取

## 📚 词典管理任务

### 4. R18 词典表
**需求**:
- [ ] 创建 R18 专用词典表
- [ ] 添加成人内容相关词汇
- [ ] 实现 R18 内容的智能识别和翻译
- [ ] 集成到翻译流程中

### 5. 常规词典表
**需求**:
- [ ] 创建常规游戏词典表
- [ ] 添加游戏通用词汇
- [ ] 实现常规内容的翻译优化
- [ ] 与 R18 词典表分离管理

## 📁 历史记录功能

### 6. 历史路径记录
**问题**: 历史路径没有记录
**需求**:
- [ ] 添加历史路径记录功能
- [ ] 保存用户最近使用的模组路径
- [ ] 提供快速选择历史路径的界面
- [ ] 支持历史路径的清理和管理

## 🔍 智能扫描功能

### 7. Def 目录扫描和对比
**需求**: 新增功能 - 扫描 def 目录，新增内容对比缺少的 key 进行新增
**详细需求**:
- [ ] 扫描 Def 目录中的所有翻译文件
- [ ] 对比现有翻译和新增内容
- [ ] 识别缺少的 key
- [ ] 自动新增缺少的 key
- [ ] 保持现有 key 不变（key 不缺少不新增）
- [ ] 生成新增 key 的报告

## 🛠️ 技术实现细节

### 8. DLL 解析模块
- [ ] 研究 RimWorld DLL 文件结构
- [ ] 实现 DLL 反编译或资源提取
- [ ] 添加 DLL 翻译内容识别算法
- [ ] 集成到现有提取流程

### 9. 内嵌 Mod 扫描器
- [ ] 实现递归目录扫描
- [ ] 识别 mod 的嵌套结构
- [ ] 处理不同层级的翻译文件
- [ ] 避免重复扫描和冲突

### 10. Common 类型支持
- [ ] 分析 Common 目录的文件结构
- [ ] 实现 Common 类型的翻译提取
- [ ] 添加 Common 类型的配置选项
- [ ] 测试 Common 模组的兼容性

### 11. 词典系统
- [ ] 设计词典表的数据结构
- [ ] 实现词典的加载和管理
- [ ] 添加词典的优先级机制
- [ ] 集成到翻译流程中

### 12. 历史记录系统
- [ ] 设计历史记录的存储格式
- [ ] 实现历史记录的读写功能
- [ ] 添加历史记录的 UI 界面
- [ ] 实现历史记录的清理功能

### 13. 智能对比系统
- [ ] 实现翻译内容的对比算法
- [ ] 识别新增和缺失的 key
- [ ] 生成对比报告
- [ ] 实现自动新增功能

## 📋 测试任务

### 14. 功能测试
- [ ] 测试 DLL 解析功能
- [ ] 测试内嵌 Mod 扫描
- [ ] 测试 Common 类型支持
- [ ] 测试词典系统
- [ ] 测试历史记录功能
- [ ] 测试智能对比功能

### 15. 兼容性测试
- [ ] 测试与现有系统的兼容性
- [ ] 测试不同模组类型的支持
- [ ] 测试大量文件的处理性能
- [ ] 测试错误处理和恢复

## 📝 文档任务

### 16. 用户文档
- [ ] 编写新功能的使用说明
- [ ] 更新用户手册
- [ ] 添加常见问题解答
- [ ] 创建功能演示视频

### 17. 开发文档
- [ ] 编写技术实现文档
- [ ] 更新 API 文档
- [ ] 添加代码注释
- [ ] 创建架构图

## 🎯 优先级排序

1. **紧急**: DLL 配置翻译支持
2. **高**: 内嵌 Mod 翻译支持
3. **高**: Common 类型模组翻译
4. **中**: R18 和常规词典表
5. **中**: 历史路径记录
6. **中**: Def 目录智能扫描
7. **低**: 文档和测试

## 📅 预计时间线

- **第1周**: DLL 解析模块开发
- **第2周**: 内嵌 Mod 和 Common 类型支持
- **第3周**: 词典系统开发
- **第4周**: 历史记录和智能对比功能
- **第5周**: 测试和文档完善

## 🔧 技术栈

- **DLL 解析**: 可能需要使用 .NET 反编译工具
- **文件扫描**: Python pathlib 和 os 模块
- **词典管理**: YAML 配置文件
- **历史记录**: JSON 或 SQLite 数据库
- **智能对比**: 文本差异算法

---

**注意**: 这个待办清单需要根据实际开发进度和用户反馈进行调整。建议按优先级逐步实现，确保每个功能都经过充分测试。
